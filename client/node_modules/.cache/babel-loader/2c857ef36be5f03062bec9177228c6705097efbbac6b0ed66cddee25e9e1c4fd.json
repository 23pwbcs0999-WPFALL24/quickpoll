{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\quickpoll\\\\client\\\\src\\\\components\\\\PollResults.js\",\n  _s = $RefreshSig$();\n// client/src/components/PollResults.js\nimport React, { useContext, useEffect, useState } from 'react';\nimport { SocketContext } from '../context/SocketContext'; // ✅\nimport './PollResults.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PollResults = ({\n  options: initialOptions,\n  pollId\n}) => {\n  _s();\n  const socket = useContext(SocketContext);\n  const [options, setOptions] = useState(initialOptions);\n\n  // Calculate total votes\n  const totalVotes = options.reduce((sum, opt) => sum + opt.votes, 0);\n\n  // ✅ Listen for vote updates\n  useEffect(() => {\n    if (!socket || !pollId) return;\n\n    // Join room for real-time updates\n    socket.emit('joinPollRoom', pollId);\n\n    // Update options on vote\n    socket.on('voteUpdate', updatedOptions => {\n      setOptions(updatedOptions);\n    });\n\n    // Cleanup\n    return () => {\n      socket.emit('leavePollRoom', pollId);\n      socket.off('voteUpdate');\n    };\n  }, [socket, pollId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"results-container\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"results-list\",\n      children: options.map((option, index) => {\n        const percentage = totalVotes > 0 ? Math.round(option.votes / totalVotes * 100) : 0;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"result-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"option-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"option-text\",\n              children: option.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"vote-count\",\n              children: [option.votes, \" votes (\", percentage, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-bar\",\n              style: {\n                width: `${percentage}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(PollResults, \"Zog0yVqD8smOs3SCOMNesb/BTO0=\");\n_c = PollResults;\nexport default PollResults;\nvar _c;\n$RefreshReg$(_c, \"PollResults\");","map":{"version":3,"names":["React","useContext","useEffect","useState","SocketContext","jsxDEV","_jsxDEV","PollResults","options","initialOptions","pollId","_s","socket","setOptions","totalVotes","reduce","sum","opt","votes","emit","on","updatedOptions","off","className","children","map","option","index","percentage","Math","round","text","fileName","_jsxFileName","lineNumber","columnNumber","style","width","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/quickpoll/client/src/components/PollResults.js"],"sourcesContent":["// client/src/components/PollResults.js\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { SocketContext } from '../context/SocketContext'; // ✅\r\nimport './PollResults.css';\r\n\r\nconst PollResults = ({ options: initialOptions, pollId }) => {\r\n  const socket = useContext(SocketContext);\r\n  const [options, setOptions] = useState(initialOptions);\r\n\r\n  // Calculate total votes\r\n  const totalVotes = options.reduce((sum, opt) => sum + opt.votes, 0);\r\n\r\n  // ✅ Listen for vote updates\r\n  useEffect(() => {\r\n    if (!socket || !pollId) return;\r\n\r\n    // Join room for real-time updates\r\n    socket.emit('joinPollRoom', pollId);\r\n\r\n    // Update options on vote\r\n    socket.on('voteUpdate', (updatedOptions) => {\r\n      setOptions(updatedOptions);\r\n    });\r\n\r\n    // Cleanup\r\n    return () => {\r\n      socket.emit('leavePollRoom', pollId);\r\n      socket.off('voteUpdate');\r\n    };\r\n  }, [socket, pollId]);\r\n\r\n  return (\r\n    <div className=\"results-container\">\r\n      <ul className=\"results-list\">\r\n        {options.map((option, index) => {\r\n          const percentage = totalVotes > 0\r\n            ? Math.round((option.votes / totalVotes) * 100)\r\n            : 0;\r\n\r\n          return (\r\n            <li key={index} className=\"result-item\">\r\n              <div className=\"option-info\">\r\n                <span className=\"option-text\">{option.text}</span>\r\n                <span className=\"vote-count\">{option.votes} votes ({percentage}%)</span>\r\n              </div>\r\n              <div className=\"progress-bar-container\">\r\n                <div\r\n                  className=\"progress-bar\"\r\n                  style={{ width: `${percentage}%` }}\r\n                ></div>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PollResults;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}