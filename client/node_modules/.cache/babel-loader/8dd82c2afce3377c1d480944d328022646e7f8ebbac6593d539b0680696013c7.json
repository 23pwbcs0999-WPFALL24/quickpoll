{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{getPoll,votePoll}from'../services/api';import'../styles/PollPage.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PollPage(){const{id}=useParams();const[poll,setPoll]=useState(null);const[selected,setSelected]=useState(null);const[message,setMessage]=useState('');const[voted,setVoted]=useState(false);useEffect(()=>{getPoll(id).then(res=>setPoll(res.data)).catch(()=>setMessage('Poll not found'));},[id]);const handleVote=async()=>{try{await votePoll(id,{optionIndex:selected});setMessage('Thank you for voting!');setVoted(true);// Optionally, refresh poll data if you want to update vote counts\n// const res = await getPoll(id);\n// setPoll(res.data);\n}catch(err){var _err$response,_err$response$data;setMessage('Error voting: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||''));}};if(!poll)return/*#__PURE__*/_jsx(\"div\",{className:\"poll-page-container\",children:message||'Loading poll...'});return/*#__PURE__*/_jsxs(\"div\",{className:\"poll-page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"poll-header\",children:poll.question}),!voted?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"options-list\",children:poll.options.map((opt,idx)=>/*#__PURE__*/_jsx(\"button\",{className:`option-btn ${selected===idx?'selected':''}`,onClick:()=>setSelected(idx),children:opt.text},idx))}),/*#__PURE__*/_jsx(\"button\",{className:\"vote-btn\",onClick:handleVote,disabled:selected===null,children:\"Vote\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"thank-you-message\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"thanks\",children:\"\\uD83C\\uDF89\"}),\" Thank you for voting!\"]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"poll-message\",children:message})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","getPoll","votePoll","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PollPage","id","poll","setPoll","selected","setSelected","message","setMessage","voted","setVoted","then","res","data","catch","handleVote","optionIndex","err","_err$response","_err$response$data","response","error","className","children","question","options","map","opt","idx","onClick","text","disabled","role"],"sources":["C:/Users/user/Desktop/quickpoll/client/src/pages/PollPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getPoll, votePoll } from '../services/api';\r\nimport '../styles/PollPage.css';\r\n\r\nexport default function PollPage() {\r\n  const { id } = useParams();\r\n\r\n  const [poll, setPoll] = useState(null);\r\n  const [selected, setSelected] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [voted, setVoted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    getPoll(id)\r\n      .then(res => setPoll(res.data))\r\n      .catch(() => setMessage('Poll not found'));\r\n  }, [id]);\r\n\r\n  const handleVote = async () => {\r\n    try {\r\n      await votePoll(id, { optionIndex: selected });\r\n      setMessage('Thank you for voting!');\r\n      setVoted(true);\r\n      // Optionally, refresh poll data if you want to update vote counts\r\n      // const res = await getPoll(id);\r\n      // setPoll(res.data);\r\n    } catch (err) {\r\n      setMessage('Error voting: ' + (err.response?.data?.error || ''));\r\n    }\r\n  };\r\n\r\n  if (!poll) return <div className=\"poll-page-container\">{message || 'Loading poll...'}</div>;\r\n\r\n  return (\r\n    <div className=\"poll-page-container\">\r\n      <h2 className=\"poll-header\">{poll.question}</h2>\r\n      {!voted ? (\r\n        <>\r\n          <div className=\"options-list\">\r\n            {poll.options.map((opt, idx) => (\r\n              <button\r\n                key={idx}\r\n                className={`option-btn ${selected === idx ? 'selected' : ''}`}\r\n                onClick={() => setSelected(idx)}\r\n              >\r\n                {opt.text}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <button className=\"vote-btn\" onClick={handleVote} disabled={selected === null}>\r\n            Vote\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <div className=\"thank-you-message\">\r\n          <span role=\"img\" aria-label=\"thanks\">ðŸŽ‰</span> Thank you for voting!\r\n        </div>\r\n      )}\r\n      {message && <p className=\"poll-message\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}